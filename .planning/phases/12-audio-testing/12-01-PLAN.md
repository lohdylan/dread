---
phase: 12-audio-testing
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/main/resources/assets/dread/sounds/grab_impact.ogg
  - src/main/resources/assets/dread/sounds.json
autonomous: false

must_haves:
  truths:
    - "grab_impact.ogg plays when death grab animation starts"
    - "Sound is audible and has proper visceral/horror quality"
    - "Sound has correct spatial positioning (mono, directional)"
  artifacts:
    - path: "src/main/resources/assets/dread/sounds/grab_impact.ogg"
      provides: "Horror impact sound for death grab"
      format: "OGG Vorbis, mono, 44100Hz"
    - path: "src/main/resources/assets/dread/sounds.json"
      provides: "Sound registration for Minecraft"
      contains: "grab_impact"
  key_links:
    - from: "sounds.json"
      to: "sounds/grab_impact.ogg"
      via: "Minecraft sound registry"
      pattern: "grab_impact"
    - from: "dread_entity.animation.json"
      to: "sounds.json"
      via: "GeckoLib sound keyframe"
      pattern: "dread:grab_impact"
---

<objective>
Add the missing grab_impact.ogg sound file and register it in sounds.json to complete the death cinematic audio.

Purpose: The grab impact is the peak horror moment — the culmination of the jump scare. The sound must be wet/visceral, evoking classic 80s practical creature effects (Alien, The Thing).

Output: A working grab_impact.ogg file that plays automatically when the death_grab animation starts.
</objective>

<execution_context>
@C:\Users\dylan\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\dylan\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-audio-testing/12-CONTEXT.md
@.planning/phases/12-audio-testing/12-RESEARCH.md
@src/main/resources/assets/dread/sounds.json
@src/main/java/com/dread/sound/ModSounds.java
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Create grab_impact.ogg audio file</name>
  <why>Audio file creation requires Audacity (GUI application) which Claude cannot operate</why>
  <action>
    Create a 1-2 second horror impact sound using Audacity. The sound should be:
    - Wet/visceral feeling — flesh-tearing, organic horror
    - Pure creature/monster — no human victim sounds, alien and inhuman
    - Drawn out (1-2 seconds) — impact bleeds into sustained horror
    - Classic 80s horror inspiration (Alien, The Thing)
  </action>
  <how-to-create>
    **Option A: Source from royalty-free library**
    1. Visit Pixabay (https://pixabay.com/sound-effects/search/monster/) or Zapsplat
    2. Search for: "monster impact", "creature attack", "flesh tear", "bone snap"
    3. Download a suitable sound
    4. Import into Audacity for processing

    **Option B: Generate in Audacity**
    1. Generate base tone: Generate -> Tone -> Sawtooth, 70-90 Hz, 1.2 seconds
    2. Add distortion: Effect -> Distortion -> Hard Clipping, 30-40%
    3. Layer organic noise: Generate -> Noise -> Brown, 1.0s, low-pass filter at 800 Hz
    4. Add movement: Effect -> Sliding Stretch -> +3 semitones initial, -5 semitones final
    5. Shape envelope: Quick fade in (0.05s), fade out over final 0.5s

    **Final processing (REQUIRED for both options):**
    1. Effect -> Normalize -> Peak to -1.0 dB (prevents clipping)
    2. Tracks -> Mix -> Mix Stereo Down to Mono (CRITICAL for directional audio)
    3. File -> Export -> Export Audio
       - Format: Ogg Vorbis
       - Quality: 5-7
       - Channels: Mono
    4. Save to: `src/main/resources/assets/dread/sounds/grab_impact.ogg`
  </how-to-create>
  <verify>File exists at src/main/resources/assets/dread/sounds/grab_impact.ogg</verify>
  <resume-signal>Type "done" when grab_impact.ogg is saved to the sounds folder</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Register grab_impact in sounds.json</name>
  <files>src/main/resources/assets/dread/sounds.json</files>
  <action>
    Add grab_impact sound entry to sounds.json. Use category "hostile" to match other Dread entity sounds (dread_jumpscare, dread_death). Do NOT use stream:true since this is a short (<5s) sound effect.

    Add this entry:
    ```json
    "grab_impact": {
      "category": "hostile",
      "sounds": [
        {
          "name": "dread:grab_impact",
          "stream": false
        }
      ]
    }
    ```
  </action>
  <verify>
    1. sounds.json is valid JSON (no syntax errors)
    2. grab_impact entry exists with category "hostile" and stream: false
  </verify>
  <done>grab_impact sound registered in sounds.json with hostile category</done>
</task>

<task type="auto">
  <name>Task 3: Build and verify sound integration</name>
  <files>N/A (build verification)</files>
  <action>
    Build the mod to ensure the new sound is included in the JAR.

    Run: `export JAVA_HOME="X:/Vibe Coding/jdk-21.0.6+7" && ./gradlew build`

    Verify the built JAR contains:
    - assets/dread/sounds/grab_impact.ogg
    - assets/dread/sounds.json with grab_impact entry
  </action>
  <verify>
    1. Build completes without errors
    2. Check build output: `unzip -l build/libs/dread-*.jar | grep grab_impact`
  </verify>
  <done>Mod builds successfully with grab_impact.ogg included</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 4: Verify sound plays in-game</name>
  <what-built>grab_impact sound file and registration</what-built>
  <how-to-verify>
    1. Launch Minecraft with the mod
    2. Create a test world (creative mode for easy spawning)
    3. Spawn Dread entity: `/summon dread:dread_entity`
    4. Let Dread attack and kill you (enter survival mode briefly)
    5. Listen for grab_impact sound at the moment of death grab

    Expected behavior:
    - Wet/visceral impact sound plays when Dread grabs player
    - Sound has proper volume (audible but not overwhelming)
    - Sound has directional quality (louder from Dread's direction)
  </how-to-verify>
  <resume-signal>Type "approved" if sound plays correctly, or describe issues</resume-signal>
</task>

</tasks>

<verification>
1. grab_impact.ogg file exists in sounds folder
2. sounds.json contains grab_impact entry
3. Mod builds without errors
4. Sound plays during death grab animation in-game
</verification>

<success_criteria>
- grab_impact.ogg exists as mono OGG Vorbis file (1-2 seconds)
- Sound registered in sounds.json with category "hostile"
- GeckoLib animation automatically triggers sound at keyframe 0.0
- Sound is audible and has horror quality during death grab
</success_criteria>

<output>
After completion, create `.planning/phases/12-audio-testing/12-01-SUMMARY.md`
</output>
